import{I as t,e as o,o as a,c as n,w as s,a as i,b as e,r as l,h as u,t as r,z as c,y as d,d as f,F as p,i as b,j as _,G as g,q as m,s as x,n as C,f as k}from"./index.cfe26b5f.js";import{_ as h}from"./uni-icons.e166c0cb.js";import{r as v}from"./uni-app.es.e3ab09e6.js";import{_ as y}from"./plugin-vue_export-helper.21dcd24c.js";import{m as G}from"./request.ada75ed3.js";import{a as j}from"./cart.d9ceeb3a.js";import{c as w}from"./checkLogin.6fe48e50.js";var F={en:{"uni-goods-nav.options.shop":"shop","uni-goods-nav.options.cart":"cart","uni-goods-nav.buttonGroup.addToCart":"add to cart","uni-goods-nav.buttonGroup.buyNow":"buy now"},"zh-Hans":{"uni-goods-nav.options.shop":"店铺","uni-goods-nav.options.cart":"购物车","uni-goods-nav.buttonGroup.addToCart":"加入购物车","uni-goods-nav.buttonGroup.buyNow":"立即购买"},"zh-Hant":{"uni-goods-nav.options.shop":"店鋪","uni-goods-nav.options.cart":"購物車","uni-goods-nav.buttonGroup.addToCart":"加入購物車","uni-goods-nav.buttonGroup.buyNow":"立即購買"}};const{t:N}=t(F);var B=y({name:"UniGoodsNav",emits:["click","buttonClick"],props:{options:{type:Array,default:()=>[{icon:"shop",text:N("uni-goods-nav.options.shop")},{icon:"cart",text:N("uni-goods-nav.options.cart")}]},buttonGroup:{type:Array,default:()=>[{text:N("uni-goods-nav.buttonGroup.addToCart"),backgroundColor:"linear-gradient(90deg, #FFCD1E, #FF8A18)",color:"#fff"},{text:N("uni-goods-nav.buttonGroup.buyNow"),backgroundColor:"linear-gradient(90deg, #FE6035, #EF1224)",color:"#fff"}]},fill:{type:Boolean,default:!1}},methods:{onClick(t,o){this.$emit("click",{index:t,content:o})},buttonClick(t,o){uni.report&&uni.report(o.text,o.text),this.$emit("buttonClick",{index:t,content:o})}}},[["render",function(t,g,m,x,C,k){const y=b,G=v(o("uni-icons"),h),j=_;return a(),n(y,{class:"uni-goods-nav"},{default:s((()=>[i(y,{class:"uni-tab__seat"}),i(y,{class:"uni-tab__cart-box flex"},{default:s((()=>[i(y,{class:"flex uni-tab__cart-sub-left"},{default:s((()=>[(a(!0),e(p,null,l(m.options,((t,o)=>(a(),n(y,{key:o,class:"flex uni-tab__cart-button-left uni-tab__shop-cart",onClick:a=>k.onClick(o,t)},{default:s((()=>[i(y,{class:"uni-tab__icon"},{default:s((()=>[i(G,{type:t.icon,size:"20",color:"#646566"},null,8,["type"])])),_:2},1024),i(j,{class:"uni-tab__text"},{default:s((()=>[u(r(t.text),1)])),_:2},1024),i(y,{class:"flex uni-tab__dot-box"},{default:s((()=>[t.info?(a(),n(j,{key:0,class:c([{"uni-tab__dots":t.info>9},"uni-tab__dot"]),style:d({backgroundColor:t.infoBackgroundColor?t.infoBackgroundColor:"#ff0000",color:t.infoColor?t.infoColor:"#fff"})},{default:s((()=>[u(r(t.info),1)])),_:2},1032,["class","style"])):f("",!0)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1}),i(y,{class:c([{"uni-tab__right":m.fill},"flex uni-tab__cart-sub-right"])},{default:s((()=>[(a(!0),e(p,null,l(m.buttonGroup,((t,o)=>(a(),n(y,{key:o,style:d({background:t.backgroundColor,color:t.color}),class:"flex uni-tab__cart-button-right",onClick:a=>k.buttonClick(o,t)},{default:s((()=>[i(j,{style:d({color:t.color}),class:"uni-tab__cart-button-right-text"},{default:s((()=>[u(r(t.text),1)])),_:2},1032,["style"])])),_:2},1032,["style","onClick"])))),128))])),_:1},8,["class"])])),_:1})])),_:1})}],["__scopeId","data-v-022783ae"]]);var O=y({data:()=>({id:0,item:{},options:[{icon:"headphones",text:"客服"},{icon:"shop",text:"店铺",infoBackgroundColor:"#007aff",infoColor:"red"},{icon:"cart",text:"购物车",info:2}],buttonGroup:[{text:"加入购物车",backgroundColor:"#ff0000",color:"#fff"},{text:"立即购买",backgroundColor:"#ffa200",color:"#fff"}]}),comments:["goodsNav"],onLoad:function(t){this.id=t.id,this.init()},methods:{async init(){let t=await G({url:"/dangdang",method:"get",data:{id:this.id}});this.item=t.data.data[0]},onClick(t){"购物车"===t.content.text&&g({url:"/pages/cart/cart"})},buttonClick(t){w().then((o=>{if(!0===o.status){let o=m("token");if(0===t.index)j(o,this.id).then((t=>{!0===t.status?(x({title:"添加成功"}),g({url:"/pages/cart/cart"})):-1!==t.msg.indexOf("重复")&&(x({title:"购物车已存在该商品"}),g({url:"/pages/cart/cart"}))}));else if(1===t.index){let t="/pages/addOrder/addOrder?item="+encodeURIComponent(JSON.stringify(this.item));t.indexOf("%")>-1&&(t=t.replace(/%/g,"%25")),C({url:t})}}}))}}},[["render",function(t,e,l,c,d,f){const p=k,g=_,m=b,x=v(o("uni-goods-nav"),B);return a(),n(m,{class:"goods_detail"},{default:s((()=>[i(p,{src:d.item.image},null,8,["src"]),i(m,{class:"box1"},{default:s((()=>[i(m,{class:"price"},{default:s((()=>[i(g,null,{default:s((()=>[u("￥123")])),_:1}),i(g,null,{default:s((()=>[u("￥123")])),_:1})])),_:1}),i(m,{class:"goods_name"},{default:s((()=>[u(r(d.item.title),1)])),_:1})])),_:1}),i(m,{class:"line"}),i(m,{class:"box2"},{default:s((()=>[i(m,null,{default:s((()=>[u("作者："+r(d.item.author),1)])),_:1})])),_:1}),i(m,{class:"line"}),i(m,{class:"box3"},{default:s((()=>[i(m,{class:"tit"},{default:s((()=>[u("详情介绍")])),_:1}),i(m,{class:"content"},{default:s((()=>[u(r(d.item.title),1)])),_:1})])),_:1}),i(m,{class:"goods_nav"},{default:s((()=>[i(x,{fill:!0,options:d.options,buttonGroup:d.buttonGroup,onClick:f.onClick,onButtonClick:f.buttonClick},null,8,["options","buttonGroup","onClick","onButtonClick"])])),_:1})])),_:1})}],["__scopeId","data-v-7e8d1842"]]);export{O as default};
